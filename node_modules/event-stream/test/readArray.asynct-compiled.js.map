{"version":3,"sources":["readArray.asynct.js"],"names":[],"mappings":"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","file":"readArray.asynct-compiled.js","sourcesContent":["\nvar es = require('../')\n  , it = require('it-is').style('colour')\n  , d = require('ubelt')\n\nfunction readStream(stream, pauseAt, done) {\n  if(!done) done = pauseAt, pauseAt = -1\n  var array = [] \n  stream.on('data', function (data) {\n    array.push(data)\n    if(!--pauseAt )\n      stream.pause(), done(null, array)\n  })\n  stream.on('error', done)\n  stream.on('end', function (data) {\n    done(null, array)\n  })\n\n}\n\nexports ['read an array'] = function (test) {\n\n  var readThis = d.map(3, 6, 100, d.id) //array of multiples of 3 < 100\n\n  var reader = es.readArray(readThis)\n\n  var writer = es.writeArray(function (err, array){\n    if(err) throw err //unpossible\n    it(array).deepEqual(readThis)\n    test.done()     \n  })\n\n  reader.pipe(writer)\n}\n\nexports ['read an array and pause it.'] = function (test) {\n\n  var readThis = d.map(3, 6, 100, d.id) //array of multiples of 3 < 100\n\n  var reader = es.readArray(readThis)\n  \n  readStream(reader, 10, function (err, data) {\n    if(err) throw err\n    it(data).deepEqual([3, 6, 9, 12, 15, 18, 21, 24, 27, 30])\n    readStream(reader, 10, function (err, data) {\n      it(data).deepEqual([33, 36, 39, 42, 45, 48, 51, 54, 57, 60])\n      test.done() \n    })\n    reader.resume()\n  })\n\n}\n\nexports ['reader is readable, but not writeable'] = function (test) {\n  var reader = es.readArray([1])\n  it(reader).has({\n    readable: true,\n    writable: false\n  })\n\n  test.done()\n}\n\n\nexports ['read one item per tick'] = function (test) {\n  var readThis = d.map(3, 6, 100, d.id) //array of multiples of 3 < 100\n  var drains = 0\n  var reader = es.readArray(readThis)\n  var tickMapper = es.map(function (data,callback) {\n    process.nextTick(function () {\n      callback(null, data)\n    })\n    //since tickMapper is returning false\n    //pipe should pause the writer until a drain occurs\n    return false\n  })\n  reader.pipe(tickMapper)\n  readStream(tickMapper, function (err, array) {\n    it(array).deepEqual(readThis)\n    it(array.length).deepEqual(readThis.length)\n    it(drains).equal(readThis.length)\n    test.done()\n  })\n  tickMapper.on('drain', function () {\n    drains ++\n  })\n\n}\nrequire('./helper')(module)\n"]}