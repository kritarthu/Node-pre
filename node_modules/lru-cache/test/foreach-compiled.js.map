{"version":3,"sources":["foreach.js"],"names":[],"mappings":"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","file":"foreach-compiled.js","sourcesContent":["var test = require('tap').test\nvar LRU = require('../')\n\ntest('forEach', function (t) {\n  var l = new LRU(5)\n  var i\n  for (i = 0; i < 10; i++) {\n    l.set(i, i.toString(2))\n  }\n\n  i = 9\n  l.forEach(function (val, key, cache) {\n    t.equal(cache, l)\n    t.equal(key, i)\n    t.equal(val, i.toString(2))\n    i -= 1\n  })\n\n  // get in order of most recently used\n  l.get(6)\n  l.get(8)\n\n  var order = [ 8, 6, 9, 7, 5 ]\n  i = 0\n\n  l.forEach(function (val, key, cache) {\n    var j = order[i++]\n    t.equal(cache, l)\n    t.equal(key, j)\n    t.equal(val, j.toString(2))\n  })\n  t.equal(i, order.length)\n\n  i = 0\n  order.reverse()\n  l.rforEach(function (val, key, cache) {\n    var j = order[i++]\n    t.equal(cache, l)\n    t.equal(key, j)\n    t.equal(val, j.toString(2))\n  })\n  t.equal(i, order.length)\n\n  t.end()\n})\n\ntest('keys() and values()', function (t) {\n  var l = new LRU(5)\n  var i\n  for (i = 0; i < 10; i++) {\n    l.set(i, i.toString(2))\n  }\n\n  t.similar(l.keys(), [9, 8, 7, 6, 5])\n  t.similar(l.values(), ['1001', '1000', '111', '110', '101'])\n\n  // get in order of most recently used\n  l.get(6)\n  l.get(8)\n\n  t.similar(l.keys(), [8, 6, 9, 7, 5])\n  t.similar(l.values(), ['1000', '110', '1001', '111', '101'])\n\n  t.end()\n})\n\ntest('all entries are iterated over', function (t) {\n  var l = new LRU(5)\n  var i\n  for (i = 0; i < 10; i++) {\n    l.set(i.toString(), i.toString(2))\n  }\n\n  i = 0\n  l.forEach(function (val, key, cache) {\n    if (i > 0) {\n      cache.del(key)\n    }\n    i += 1\n  })\n\n  t.equal(i, 5)\n  t.equal(l.keys().length, 1)\n\n  t.end()\n})\n\ntest('all stale entries are removed', function (t) {\n  var l = new LRU({ max: 5, maxAge: -5, stale: true })\n  var i\n  for (i = 0; i < 10; i++) {\n    l.set(i.toString(), i.toString(2))\n  }\n\n  i = 0\n  l.forEach(function () {\n    i += 1\n  })\n\n  t.equal(i, 5)\n  t.equal(l.keys().length, 0)\n\n  t.end()\n})\n\ntest('expires', function (t) {\n  var l = new LRU({\n    max: 10,\n    maxAge: 50\n  })\n  var i\n  for (i = 0; i < 10; i++) {\n    l.set(i.toString(), i.toString(2), ((i % 2) ? 25 : undefined))\n  }\n\n  i = 0\n  var order = [ 8, 6, 4, 2, 0 ]\n  setTimeout(function () {\n    l.forEach(function (val, key, cache) {\n      var j = order[i++]\n      t.equal(cache, l)\n      t.equal(key, j.toString())\n      t.equal(val, j.toString(2))\n    })\n    t.equal(i, order.length)\n\n    setTimeout(function () {\n      var count = 0\n      l.forEach(function (val, key, cache) { count++ })\n      t.equal(0, count)\n      t.end()\n    }, 25)\n  }, 26)\n})\n"]}