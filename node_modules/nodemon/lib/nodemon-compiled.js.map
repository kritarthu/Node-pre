{"version":3,"sources":["nodemon.js"],"names":[],"mappings":"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","file":"nodemon-compiled.js","sourcesContent":["var debug = require('debug')('nodemon');\nvar path = require('path');\nvar monitor = require('./monitor');\nvar cli = require('./cli');\nvar version = require('./version');\nvar util = require('util');\nvar utils = require('./utils');\nvar bus = utils.bus;\nvar help = require('./help');\nvar config = require('./config');\nvar spawn = require('./spawn');\nvar eventHandlers = {};\n\n// this is fairly dirty, but theoretically sound since it's part of the\n// stable module API\nconfig.required = utils.isRequired;\n\nfunction nodemon(settings) {\n  nodemon.reset();\n\n  // allow the cli string as the argument to nodemon, and allow for\n  // `node nodemon -V app.js` or just `-V app.js`\n  if (typeof settings === 'string') {\n    settings = settings.trim();\n    if (settings.indexOf('node') !== 0) {\n      if (settings.indexOf('nodemon') !== 0) {\n        settings = 'nodemon ' + settings;\n      }\n      settings = 'node ' + settings;\n    }\n    settings = cli.parse(settings);\n  }\n\n  // set the debug flag as early as possible to get all the detailed logging\n  if (settings.verbose) {\n    utils.debug = true;\n  }\n\n  if (settings.help) {\n    console.log(help(settings.help));\n    if (!config.required) {\n      process.exit(0);\n    }\n  }\n\n  if (settings.version) {\n    version().then(function (v) {\n      console.log(v);\n      if (!config.required) {\n        process.exit(0);\n      }\n    });\n    return;\n  }\n\n  // nodemon tools like grunt-nodemon. This affects where\n  // the script is being run from, and will affect where\n  // nodemon looks for the nodemon.json files\n  if (settings.cwd) {\n    // this is protection to make sure we haven't dont the chdir already...\n    // say like in cli/parse.js (which is where we do this once already!)\n    if (process.cwd() !== path.resolve(config.system.cwd, settings.cwd)) {\n      process.chdir(settings.cwd);\n    }\n  }\n\n  config.load(settings, function (config) {\n    if (!config.options.dump && !config.options.execOptions.script &&\n      config.options.execOptions.exec === 'node') {\n      if (!config.required) {\n        console.log(help('usage'));\n        process.exit();\n      }\n      return;\n    }\n\n    // before we print anything, update the colour setting on logging\n    utils.colours = config.options.colours;\n\n    // always echo out the current version\n    utils.log.info(version.pinned);\n\n    if (config.options.cwd) {\n      utils.log.detail('process root: ' + process.cwd());\n    }\n\n    config.loaded.forEach(function (filename) {\n      utils.log.detail('reading config ' + filename);\n    });\n\n    // echo out notices about running state\n    if (config.options.restartable) {\n      // allow nodemon to restart when the use types 'rs\\n'\n      process.stdin.resume();\n      process.stdin.setEncoding('utf8');\n      process.stdin.on('data', function (data) {\n        data = (data + '').trim().toLowerCase();\n\n        // if the keys entered match the restartable value, then restart!\n        if (data === config.options.restartable) {\n          bus.emit('restart');\n        }\n      });\n    } else if (config.options.stdin) {\n      // if 'restartable' is disabled (via a nodemon.json)\n      // then it's possible we're being used with a REPL\n      // so let's make sure we don't eat the key presses\n      // but also, since we're wrapping, watch out for\n      // special keys, like ctrl+c x 2 or '.exit' or ctrl+d\n      var ctrlC = false;\n      var buffer = '';\n\n      process.stdin.on('data', function (data) {\n        buffer += data;\n        data = data.toString();\n        var chr = data.charCodeAt(0);\n        if (chr === 3) {\n          if (ctrlC) {\n            process.exit();\n          }\n          ctrlC = true;\n        } else if (buffer === '.exit' || chr === 4) {\n          process.exit();\n        } else if (ctrlC || chr === 10) {\n          ctrlC = false;\n          buffer = '';\n        }\n      });\n      process.stdin.setRawMode(true);\n    }\n\n    if (config.options.restartable) {\n      utils.log.info('to restart at any time, enter `' +\n        config.options.restartable + '`');\n    }\n\n    var none = function (v) {\n      return v;\n    };\n\n    utils.log.detail('ignoring: ' + config.options.monitor.map(function (rule) {\n      return rule.slice(0, 1) === '!' ? rule.slice(1) : false;\n    }).filter(none).join(' '));\n\n    utils.log.info('watching: ' + config.options.monitor.map(function (rule) {\n      return rule.slice(0, 1) !== '!' ? rule : false;\n    }).filter(none).join(' '));\n\n    utils.log.detail('watching extensions: ' + config.options.execOptions.ext);\n\n\n    if (config.options.dump) {\n      utils.log._log('log', '--------------');\n      utils.log._log('log', 'node: ' + process.version);\n      utils.log._log('log', 'nodemon: ' + version.pinned);\n      utils.log._log('log', 'command: ' + process.argv.join(' '));\n      utils.log._log('log', 'cwd: ' + process.cwd());\n      utils.log._log('log', ['OS:', process.platform, process.arch].join(' '));\n      utils.log._log('log', '--------------');\n      utils.log._log('log', util.inspect(config, { depth: null }));\n      utils.log._log('log', '--------------');\n      if (!config.required) {\n        process.exit();\n      }\n\n    } else {\n      config.run = true;\n\n      if (config.options.stdout === false) {\n        nodemon.on('start', function () {\n          nodemon.stdout = bus.stdout;\n          nodemon.stderr = bus.stderr;\n\n          bus.emit('readable');\n        });\n      }\n\n      if (config.options.events && Object.keys(config.options.events).length) {\n        Object.keys(config.options.events).forEach(function (key) {\n          utils.log.detail('bind ' + key + ' -> `' +\n            config.options.events[key] + '`');\n          nodemon.on(key, function () {\n            if (config.options && config.options.events) {\n              spawn(config.options.events[key], config,\n                [].slice.apply(arguments));\n            }\n          });\n        });\n      }\n\n      monitor.run(config.options);\n    }\n  });\n\n  return nodemon;\n}\n\nnodemon.restart = function () {\n  utils.log.status('restarting child process');\n  bus.emit('restart');\n  return nodemon;\n};\n\nnodemon.addListener = nodemon.on = function (event, handler) {\n  if (!eventHandlers[event]) { eventHandlers[event] = []; }\n  eventHandlers[event].push(handler);\n  bus.on(event, handler);\n  return nodemon;\n};\n\nnodemon.once = function (event, handler) {\n  if (!eventHandlers[event]) { eventHandlers[event] = []; }\n  eventHandlers[event].push(handler);\n  bus.once(event, function () {\n    debug('bus.once(%s)', event);\n    eventHandlers[event].splice(eventHandlers[event].indexOf(handler), 1);\n    handler.apply(this, arguments);\n  });\n  return nodemon;\n};\n\nnodemon.emit = function () {\n  bus.emit.apply(bus, [].slice.call(arguments));\n  return nodemon;\n};\n\nnodemon.removeAllListeners = function (event) {\n  // unbind only the `nodemon.on` event handlers\n  Object.keys(eventHandlers).filter(function (e) {\n    return event ? e === event : true;\n  }).forEach(function (event) {\n    eventHandlers[event].forEach(function (handler) {\n      bus.removeListener(event, handler);\n      eventHandlers[event].splice(eventHandlers[event].indexOf(handler), 1);\n    });\n  });\n\n  return nodemon;\n};\n\nnodemon.reset = function (done) {\n  bus.emit('reset', done);\n};\n\nbus.on('reset', function (done) {\n  debug('reset');\n  nodemon.removeAllListeners();\n  monitor.run.kill(true, function () {\n    utils.reset();\n    config.reset();\n    config.run = false;\n    if (done) {\n      done();\n    }\n  });\n});\n\n// expose the full config\nnodemon.config = config;\n\nmodule.exports = nodemon;\n\n"]}