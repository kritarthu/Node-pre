{"version":3,"sources":["log.js"],"names":[],"mappings":"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","file":"log-compiled.js","sourcesContent":["var colour = require('./colour');\nvar bus = require('./bus');\nvar required = false;\nvar useColours = true;\n\nvar coding = {\n  log: 'black',\n  info: 'yellow',\n  status: 'green',\n  detail: 'yellow',\n  fail: 'red',\n  error: 'red',\n};\n\nfunction log(type, text) {\n  var msg = '[nodemon] ' + (text || '');\n\n  if (useColours) {\n    msg = colour(coding[type], msg);\n  }\n\n  // always push the message through our bus\n  bus.emit('log', { type: type, message: text, colour: msg });\n\n  // but if we're running on the command line, also echo out\n  // question: should we actually just consume our own events?\n  if (!required) {\n    if (type === 'error') {\n      console.error(msg);\n    } else {\n      console.log(msg || '');\n    }\n  }\n}\n\nvar Logger = function (r) {\n  if (!(this instanceof Logger)) {\n    return new Logger(r);\n  }\n  this.required(r);\n  return this;\n};\n\nObject.keys(coding).forEach(function (type) {\n  Logger.prototype[type] = log.bind(null, type);\n});\n\n// detail is for messages that are turned on during debug\nLogger.prototype.detail = function (msg) {\n  if (this.debug) {\n    log('detail', msg);\n  }\n};\n\nLogger.prototype.required = function (val) {\n  required = val;\n};\n\nLogger.prototype.debug = false;\nLogger.prototype._log = function (type, msg) {\n  if (required) {\n    bus.emit('log', { type: type, message: msg || '', colour: msg || '' });\n  } else if (type === 'error') {\n    console.error(msg);\n  } else {\n    console.log(msg || '');\n  }\n};\n\nObject.defineProperty(Logger.prototype, 'useColours', {\n  set: function (val) {\n    useColours = val;\n  },\n  get: function () {\n    return useColours;\n  },\n});\n\nmodule.exports = Logger;\n"]}