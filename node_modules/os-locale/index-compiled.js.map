{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["'use strict';\nvar childProcess = require('child_process');\nvar execFileSync = childProcess.execFileSync;\nvar lcid = require('lcid');\nvar defaultOpts = {spawn: true};\nvar cache;\n\nfunction fallback() {\n\tcache = 'en_US';\n\treturn cache;\n}\n\nfunction getEnvLocale(env) {\n\tenv = env || process.env;\n\tvar ret = env.LC_ALL || env.LC_MESSAGES || env.LANG || env.LANGUAGE;\n\tcache = getLocale(ret);\n\treturn ret;\n}\n\nfunction parseLocale(x) {\n\tvar env = x.split('\\n').reduce(function (env, def) {\n\t\tdef = def.split('=');\n\t\tenv[def[0]] = def[1];\n\t\treturn env;\n\t}, {});\n\treturn getEnvLocale(env);\n}\n\nfunction getLocale(str) {\n\treturn (str && str.replace(/[.:].*/, '')) || fallback();\n}\n\nmodule.exports = function (opts, cb) {\n\tif (typeof opts === 'function') {\n\t\tcb = opts;\n\t\topts = defaultOpts;\n\t} else {\n\t\topts = opts || defaultOpts;\n\t}\n\n\tif (cache || getEnvLocale() || opts.spawn === false) {\n\t\tsetImmediate(cb, null, cache);\n\t\treturn;\n\t}\n\n\tvar getAppleLocale = function () {\n\t\tchildProcess.execFile('defaults', ['read', '-g', 'AppleLocale'], function (err, stdout) {\n\t\t\tif (err) {\n\t\t\t\tfallback();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcache = stdout.trim() || fallback();\n\t\t\tcb(null, cache);\n\t\t});\n\t};\n\n\tif (process.platform === 'win32') {\n\t\tchildProcess.execFile('wmic', ['os', 'get', 'locale'], function (err, stdout) {\n\t\t\tif (err) {\n\t\t\t\tfallback();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar lcidCode = parseInt(stdout.replace('Locale', ''), 16);\n\t\t\tcache = lcid.from(lcidCode) || fallback();\n\t\t\tcb(null, cache);\n\t\t});\n\t} else {\n\t\tchildProcess.execFile('locale', function (err, stdout) {\n\t\t\tif (err) {\n\t\t\t\tfallback();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar res = parseLocale(stdout);\n\n\t\t\tif (!res && process.platform === 'darwin') {\n\t\t\t\tgetAppleLocale();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcache = getLocale(res);\n\t\t\tcb(null, cache);\n\t\t});\n\t}\n};\n\nmodule.exports.sync = function (opts) {\n\topts = opts || defaultOpts;\n\n\tif (cache || getEnvLocale() || !execFileSync || opts.spawn === false) {\n\t\treturn cache;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\tvar stdout;\n\n\t\ttry {\n\t\t\tstdout = execFileSync('wmic', ['os', 'get', 'locale'], {encoding: 'utf8'});\n\t\t} catch (err) {\n\t\t\treturn fallback();\n\t\t}\n\n\t\tvar lcidCode = parseInt(stdout.replace('Locale', ''), 16);\n\t\tcache = lcid.from(lcidCode) || fallback();\n\t\treturn cache;\n\t}\n\n\tvar res;\n\n\ttry {\n\t\tres = parseLocale(execFileSync('locale', {encoding: 'utf8'}));\n\t} catch (err) {}\n\n\tif (!res && process.platform === 'darwin') {\n\t\ttry {\n\t\t\tcache = execFileSync('defaults', ['read', '-g', 'AppleLocale'], {encoding: 'utf8'}).trim() || fallback();\n\t\t\treturn cache;\n\t\t} catch (err) {\n\t\t\treturn fallback();\n\t\t}\n\t}\n\n\tcache = getLocale(res);\n\treturn cache;\n};\n"]}