{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,IAAI,QAAQ,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC,QAAQ,CAAC;AACnD,IAAI,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC;AACxC,IAAI,OAAO,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;;AAExC,SAAS,YAAY,GAAG;AACvB,SAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;AAC1C,KAAI,CAAC,MAAM,GAAG,EAAE,CAAC;AACjB,KAAI,CAAC,MAAM,GAAG,CAAC,CAAC;CAChB;;AAED,QAAQ,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;AACjC,YAAY,CAAC,SAAS,CAAC,MAAM,GAAG,UAAS,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE;AAC1D,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;AAC5B,OAAK,GAAG,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC;EAC1B;;AAED,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACxB,KAAI,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC;AAC5B,KAAI,EAAE,CAAC;CACP,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,SAAS,IAAI,CAAC,MAAM,EAAE,OAAO,EAAE,EAAE,EAAE;AACnD,KAAI,CAAC,MAAM,EAAE;AACZ,QAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;EAC/C;;AAED,KAAI,OAAO,OAAO,KAAK,UAAU,EAAE;AAClC,IAAE,GAAG,OAAO,CAAC;AACb,SAAO,GAAG,EAAE,CAAC;EACb;;AAED,KAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,KAAK,SAAS,IAAI,OAAO,KAAK,IAAI,EAAE;AAC7E,SAAO,GAAG,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC;EAChC;;AAED,KAAI,OAAO,CAAC,QAAQ,KAAK,SAAS,EAAE;AAAE,SAAO,CAAC,QAAQ,GAAG,MAAM,CAAC;EAAE;;AAElE,KAAI,OAAO,CAAC;;AAEZ,KAAI,CAAC,EAAE,EAAE;AACR,MAAI,OAAO,EAAE,MAAM,CAAC;AACpB,SAAO,GAAG,IAAI,OAAO,CAAC,UAAS,IAAI,EAAE,IAAI,EAAE;AAC1C,UAAO,GAAG,IAAI,CAAC;AACf,SAAM,GAAG,IAAI,CAAC;GACd,CAAC,CAAC;;AAEH,IAAE,GAAG,UAAU,GAAG,EAAE,IAAI,EAAE;AACzB,OAAI,GAAG,EAAE;AAAE,WAAO,MAAM,CAAC,GAAG,CAAC,CAAC;IAAE;AAChC,UAAO,CAAC,IAAI,CAAC,CAAC;GACd,CAAC;EACF;;AAED,KAAI,IAAI,GAAG,IAAI,YAAY,EAAE,CAAC;;AAE9B,KAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,YAAY;AAC7B,MAAI,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;;AAEnD,MAAI,OAAO,CAAC,QAAQ,EAAE;AACrB,OAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;GACvC;;AAED,IAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;EACf,CAAC,CAAC;;AAEH,OAAM,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;;AAEzB,OAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAElB,QAAO,OAAO,CAAC;CACf,CAAA","file":"index-compiled.js","sourcesContent":["'use strict';\n\nvar Writable = require('readable-stream').Writable;\nvar inherits = require('util').inherits;\nvar Promise = require('pinkie-promise');\n\nfunction BufferStream() {\n\tWritable.call(this, { objectMode: true });\n\tthis.buffer = [];\n\tthis.length = 0;\n}\n\ninherits(BufferStream, Writable);\nBufferStream.prototype._write = function(chunk, enc, next) {\n\tif (!Buffer.isBuffer(chunk)) {\n\t\tchunk = new Buffer(chunk);\n\t}\n\n\tthis.buffer.push(chunk);\n\tthis.length += chunk.length;\n\tnext();\n};\n\nmodule.exports = function read(stream, options, cb) {\n\tif (!stream) {\n\t\tthrow new Error('stream argument is required');\n\t}\n\n\tif (typeof options === 'function') {\n\t\tcb = options;\n\t\toptions = {};\n\t}\n\n\tif (typeof options === 'string' || options === undefined || options === null) {\n\t\toptions = { encoding: options };\n\t}\n\n\tif (options.encoding === undefined) { options.encoding = 'utf8'; }\n\n\tvar promise;\n\n\tif (!cb) {\n\t\tvar resolve, reject;\n\t\tpromise = new Promise(function(_res, _rej) {\n\t\t\tresolve = _res;\n\t\t\treject = _rej;\n\t\t});\n\n\t\tcb = function (err, data) {\n\t\t\tif (err) { return reject(err); }\n\t\t\tresolve(data);\n\t\t};\n\t}\n\n\tvar sink = new BufferStream();\n\n\tsink.on('finish', function () {\n\t\tvar data = Buffer.concat(this.buffer, this.length);\n\n\t\tif (options.encoding) {\n\t\t\tdata = data.toString(options.encoding);\n\t\t}\n\n\t\tcb(null, data);\n\t});\n\n\tstream.once('error', cb);\n\n\tstream.pipe(sink);\n\n\treturn promise;\n}\n"]}