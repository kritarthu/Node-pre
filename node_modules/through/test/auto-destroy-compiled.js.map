{"version":3,"sources":["auto-destroy.js"],"names":[],"mappings":";;AAAA,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAA;AAC1B,IAAI,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,CAAA;;;;AAI5B,IAAI,CAAC,kBAAkB,EAAE,UAAU,MAAM,EAAE;AACzC,MAAI,EAAE,GAAG,OAAO,EAAE,CAAA;AAClB,IAAE,CAAC,WAAW,GAAG,KAAK,CAAA;AACtB,MAAI,KAAK,GAAG,KAAK;MAAE,MAAM,GAAG,KAAK,CAAA;;AAEjC,IAAE,CAAC,EAAE,CAAC,KAAK,EAAE,YAAY;AACvB,UAAM,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAA;AAClB,SAAK,GAAG,IAAI,CAAA;GACb,CAAC,CAAA;AACF,IAAE,CAAC,EAAE,CAAC,OAAO,EAAE,YAAY;AACzB,UAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAA;AAChB,UAAM,GAAG,IAAI,CAAA;GACd,CAAC,CAAA;;AAEF,IAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;AACX,IAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;AACX,IAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;AACX,IAAE,CAAC,GAAG,EAAE,CAAA;AACR,QAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAA;AAChB,QAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;AACpB,IAAE,CAAC,OAAO,EAAE,CAAA;AACZ,QAAM,CAAC,EAAE,CAAC,MAAM,CAAC,CAAA;AACjB,QAAM,CAAC,GAAG,EAAE,CAAA;CACb,CAAC,CAAA","file":"auto-destroy-compiled.js","sourcesContent":["var test = require('tape')\nvar through = require('../')\n\n// must emit end before close.\n\ntest('end before close', function (assert) {\n  var ts = through()\n  ts.autoDestroy = false\n  var ended = false, closed = false\n\n  ts.on('end', function () {\n    assert.ok(!closed)\n    ended = true\n  })\n  ts.on('close', function () {\n    assert.ok(ended)\n    closed = true\n  })\n\n  ts.write(1)\n  ts.write(2)\n  ts.write(3)\n  ts.end()\n  assert.ok(ended)\n  assert.notOk(closed)\n  ts.destroy()\n  assert.ok(closed)\n  assert.end()\n})\n\n"]}