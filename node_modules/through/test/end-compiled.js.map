{"version":3,"sources":["end.js"],"names":[],"mappings":";;AAAA,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAA;AAC1B,IAAI,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,CAAA;;;;AAI5B,IAAI,CAAC,kBAAkB,EAAE,UAAU,MAAM,EAAE;AACzC,MAAI,EAAE,GAAG,OAAO,EAAE,CAAA;AAClB,MAAI,KAAK,GAAG,KAAK;MAAE,MAAM,GAAG,KAAK,CAAA;;AAEjC,IAAE,CAAC,EAAE,CAAC,KAAK,EAAE,YAAY;AACvB,UAAM,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAA;AAClB,SAAK,GAAG,IAAI,CAAA;GACb,CAAC,CAAA;AACF,IAAE,CAAC,EAAE,CAAC,OAAO,EAAE,YAAY;AACzB,UAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAA;AAChB,UAAM,GAAG,IAAI,CAAA;GACd,CAAC,CAAA;;AAEF,IAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;AACX,IAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;AACX,IAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;AACX,IAAE,CAAC,GAAG,EAAE,CAAA;AACR,QAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAA;AAChB,QAAM,CAAC,EAAE,CAAC,MAAM,CAAC,CAAA;AACjB,QAAM,CAAC,GAAG,EAAE,CAAA;CACb,CAAC,CAAA;;AAEF,IAAI,CAAC,eAAe,EAAE,UAAU,CAAC,EAAE;;AAEjC,MAAI,EAAE,GAAG,OAAO,EAAE,CAAA;AAClB,MAAI,KAAK,GAAG,KAAK;MAAE,MAAM,GAAG,KAAK,CAAA;;AAEjC,IAAE,CAAC,EAAE,CAAC,KAAK,EAAE,YAAY;AACvB,KAAC,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;AACrB,SAAK,GAAG,IAAI,CAAA;GACb,CAAC,CAAA;;AAEF,IAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;AACd,IAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;AACd,IAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;;AAEd,IAAE,CAAC,MAAM,EAAE,CAAA;;AAEX,GAAC,CAAC,GAAG,EAAE,CAAA;CACR,CAAC,CAAA","file":"end-compiled.js","sourcesContent":["var test = require('tape')\nvar through = require('../')\n\n// must emit end before close.\n\ntest('end before close', function (assert) {\n  var ts = through()\n  var ended = false, closed = false\n\n  ts.on('end', function () {\n    assert.ok(!closed)\n    ended = true\n  })\n  ts.on('close', function () {\n    assert.ok(ended)\n    closed = true\n  })\n\n  ts.write(1)\n  ts.write(2)\n  ts.write(3)\n  ts.end()\n  assert.ok(ended)\n  assert.ok(closed)\n  assert.end()\n})\n\ntest('end only once', function (t) {\n\n  var ts = through()\n  var ended = false, closed = false\n\n  ts.on('end', function () {\n    t.equal(ended, false)\n    ended = true\n  })\n\n  ts.queue(null)\n  ts.queue(null)\n  ts.queue(null)\n\n  ts.resume()\n\n  t.end()\n})\n"]}