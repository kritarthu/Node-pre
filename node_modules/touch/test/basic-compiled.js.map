{"version":3,"sources":["basic.js"],"names":[],"mappings":"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","file":"basic-compiled.js","sourcesContent":["var fs = require(\"fs\")\nvar touch = require(\"../touch.js\")\nvar t = require('tap')\n\nfunction _ (fn) { return function (er) {\n  if (er) throw er\n  fn()\n}}\n\nvar files = [\n  'sync',\n  'sync-ref',\n  'async',\n  'async-ref'\n]\n\nfiles.forEach(function (f) {\n  try { fs.unlinkSync(f) } catch (e) {}\n})\n\nvar now = Math.floor(Date.now() / 1000) * 1000\nvar then = now - 1000000000 // now - 1Msec\n\nt.test('set both to now', function (t) {\n  touch.sync(\"sync\")\n  touch(\"async\", _(function () {\n    var astat = fs.statSync(\"async\")\n    var sstat = fs.statSync(\"sync\")\n    var asa = astat.atime.getTime()\n    var ssa = sstat.atime.getTime()\n    var asm = astat.mtime.getTime()\n    var ssm = sstat.mtime.getTime()\n\n    t.equal(asm, asa)\n    t.equal(ssm, ssa)\n    t.equal(ssa, now)\n    t.equal(asa, now)\n\n    // ctime should always be now-ish\n    t.ok(Math.abs(Date.now() - sstat.ctime.getTime()) < 1000)\n    t.ok(Math.abs(Date.now() - astat.ctime.getTime()) < 1000)\n    t.end()\n  }))\n})\n\nt.test('set both to now, using futimes', function (t) {\n  function runTest (closeAfter) {\n    t.test('closeAfter=' + closeAfter, function (t) {\n      var sfd = fs.openSync('sync', 'w')\n\n      if (closeAfter) {\n        touch.ftouchSync(sfd, { closeAfter: true })\n      } else {\n        touch.ftouchSync(sfd)\n        fs.closeSync(sfd)\n      }\n\n      var afd = fs.openSync('async', 'w')\n      t.equal(afd, sfd)\n\n      var then = _(function () {\n        if (!closeAfter) {\n          fs.closeSync(afd)\n        }\n\n        var astat = fs.statSync(\"async\")\n        var sstat = fs.statSync(\"sync\")\n        var asa = astat.atime.getTime()\n        var ssa = sstat.atime.getTime()\n        var asm = astat.mtime.getTime()\n        var ssm = sstat.mtime.getTime()\n\n        t.equal(asm, asa)\n        t.equal(ssm, ssa)\n        t.equal(ssa, now)\n        t.equal(asa, now)\n\n        // ctime should always be now-ish\n        t.ok(Math.abs(Date.now() - sstat.ctime.getTime()) < 1000)\n        t.ok(Math.abs(Date.now() - astat.ctime.getTime()) < 1000)\n        t.end()\n      })\n\n      if (closeAfter) {\n        touch.ftouch(afd, {closeAfter: true}, then)\n      } else {\n        touch.ftouch(afd, then)\n      }\n    })\n  }\n\n  runTest(true)\n  runTest(false)\n  t.end()\n})\n\nt.test('set both to now - 1Msec', function (t) {\n  // also use force, just for funsies\n  touch.sync(\"sync\", { time: then, force: true })\n  touch(\"async\", { time: then, force: true }, _(function () {\n    var astat = fs.statSync(\"async\")\n    var sstat = fs.statSync(\"sync\")\n    var asa = astat.atime.getTime()\n    var ssa = sstat.atime.getTime()\n    var asm = astat.mtime.getTime()\n    var ssm = sstat.mtime.getTime()\n\n    t.notEqual(asm, now)\n    t.equal(asa, asm)\n\n    t.notEqual(ssm, now)\n    t.equal(ssa, ssm)\n\n    t.equal(ssa, then)\n    t.equal(asa, then)\n\n    t.ok(Math.abs(Date.now() - sstat.ctime.getTime()) < 1000)\n    t.ok(Math.abs(Date.now() - astat.ctime.getTime()) < 1000)\n    t.end()\n  }))\n})\n\nt.test('set mtime to now', function (t) {\n  touch.sync(\"sync\", { time: now, mtime: true })\n  touch(\"async\", { time: now, mtime: true }, _(function () {\n    var astat = fs.statSync(\"async\")\n    var sstat = fs.statSync(\"sync\")\n    var asa = astat.atime.getTime()\n    var ssa = sstat.atime.getTime()\n    var asm = astat.mtime.getTime()\n    var ssm = sstat.mtime.getTime()\n\n    t.notEqual(asa, asm)\n    t.notEqual(ssa, ssm)\n\n    t.equal(ssa, then)\n    t.equal(asa, then)\n\n    t.equal(ssm, now)\n    t.equal(asm, now)\n\n    t.ok(Math.abs(Date.now() - sstat.ctime.getTime()) < 1000)\n    t.ok(Math.abs(Date.now() - astat.ctime.getTime()) < 1000)\n    t.end()\n  }))\n})\n\nt.test('set atime to now', function (t) {\n  touch.sync(\"sync\", { time: now, atime: true })\n  touch(\"async\", { time: now, atime: true }, _(function () {\n    var astat = fs.statSync(\"async\")\n    var sstat = fs.statSync(\"sync\")\n    var asa = astat.atime.getTime()\n    var ssa = sstat.atime.getTime()\n    var asm = astat.mtime.getTime()\n    var ssm = sstat.mtime.getTime()\n\n    t.equal(asm, now)\n    t.equal(ssm, now)\n\n    t.equal(asa, now)\n    t.equal(ssa, now)\n\n    t.ok(Math.abs(Date.now() - sstat.ctime.getTime()) < 1000)\n    t.ok(Math.abs(Date.now() - astat.ctime.getTime()) < 1000)\n    t.end()\n  }))\n})\n\nt.test('nocreate should throw on ENOENT', function (t) {\n  t.throws(function () {\n    touch.sync('sync-noent', { nocreate: true })\n  })\n  touch('async-noent', { nocreate: true }, function (er) {\n    t.isa(er, Error)\n    t.end()\n  })\n})\n\nt.test('use one file as ref for another', function (t) {\n  touch.sync('sync-ref', { ref: 'sync' })\n  touch('async-ref', { ref: 'async' }, _(function () {\n    var astat = fs.statSync(\"async\")\n    var sstat = fs.statSync(\"sync\")\n    var arstat = fs.statSync('async-ref')\n    var srstat = fs.statSync('sync-ref')\n\n    var asa = astat.atime.getTime()\n    var ssa = sstat.atime.getTime()\n    var arsa = arstat.atime.getTime()\n    var srsa = srstat.atime.getTime()\n\n    var asm = astat.mtime.getTime()\n    var ssm = sstat.mtime.getTime()\n    var arsm = arstat.mtime.getTime()\n    var srsm = srstat.mtime.getTime()\n\n    var arsc = arstat.ctime.getTime()\n    var srsc = srstat.ctime.getTime()\n\n    t.equal(asm, arsm)\n    t.equal(ssm, srsm)\n\n    t.equal(asa, arsa)\n    t.equal(ssa, srsa)\n\n    t.ok(Math.abs(Date.now() - srsc) < 1000)\n    t.ok(Math.abs(Date.now() - arsc) < 1000)\n    t.end()\n  }))\n})\n\n\nt.test('cleanup', function (t) {\n  files.forEach(function (f) {\n    t.doesNotThrow('rm ' + f, function () {\n      fs.unlinkSync(f)\n    })\n  })\n  t.end()\n})\n"]}