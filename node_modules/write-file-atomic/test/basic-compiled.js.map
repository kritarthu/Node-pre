{"version":3,"sources":["basic.js"],"names":[],"mappings":"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","file":"basic-compiled.js","sourcesContent":["'use strict'\nvar test = require('tap').test\nvar requireInject = require('require-inject')\nvar writeFileAtomic = requireInject('../index', {\n  'graceful-fs': {\n    writeFile: function (tmpfile, data, options, cb) {\n      if (/nowrite/.test(tmpfile)) return cb(new Error('ENOWRITE'))\n      cb()\n    },\n    chown: function (tmpfile, uid, gid, cb) {\n      if (/nochown/.test(tmpfile)) return cb(new Error('ENOCHOWN'))\n      cb()\n    },\n    rename: function (tmpfile, filename, cb) {\n      if (/norename/.test(tmpfile)) return cb(new Error('ENORENAME'))\n      cb()\n    },\n    unlink: function (tmpfile, cb) {\n      if (/nounlink/.test(tmpfile)) return cb(new Error('ENOUNLINK'))\n      cb()\n    },\n    writeFileSync: function (tmpfile, data, options) {\n      if (/nowrite/.test(tmpfile)) throw new Error('ENOWRITE')\n    },\n    chownSync: function (tmpfile, uid, gid) {\n      if (/nochown/.test(tmpfile)) throw new Error('ENOCHOWN')\n    },\n    renameSync: function (tmpfile, filename) {\n      if (/norename/.test(tmpfile)) throw new Error('ENORENAME')\n    },\n    unlinkSync: function (tmpfile) {\n      if (/nounlink/.test(tmpfile)) throw new Error('ENOUNLINK')\n    }\n  }\n})\nvar writeFileAtomicSync = writeFileAtomic.sync\n\ntest('async tests', function (t) {\n  t.plan(7)\n  writeFileAtomic('good', 'test', {mode: '0777'}, function (err) {\n    t.notOk(err, 'No errors occur when passing in options')\n  })\n  writeFileAtomic('good', 'test', function (err) {\n    t.notOk(err, 'No errors occur when NOT passing in options')\n  })\n  writeFileAtomic('nowrite', 'test', function (err) {\n    t.is(err.message, 'ENOWRITE', 'writeFile failures propagate')\n  })\n  writeFileAtomic('nochown', 'test', {chown: {uid: 100, gid: 100}}, function (err) {\n    t.is(err.message, 'ENOCHOWN', 'Chown failures propagate')\n  })\n  writeFileAtomic('nochown', 'test', function (err) {\n    t.notOk(err, 'No attempt to chown when no uid/gid passed in')\n  })\n  writeFileAtomic('norename', 'test', function (err) {\n    t.is(err.message, 'ENORENAME', 'Rename errors propagate')\n  })\n  writeFileAtomic('norename nounlink', 'test', function (err) {\n    t.is(err.message, 'ENORENAME', 'Failure to unlink the temp file does not clobber the original error')\n  })\n})\n\ntest('sync tests', function (t) {\n  t.plan(7)\n  var throws = function (shouldthrow, msg, todo) {\n    var err\n    try { todo() } catch (e) { err = e }\n    t.is(shouldthrow, err.message, msg)\n  }\n  var noexception = function (msg, todo) {\n    var err\n    try { todo() } catch (e) { err = e }\n    t.notOk(err, msg)\n  }\n\n  noexception('No errors occur when passing in options', function () {\n    writeFileAtomicSync('good', 'test', {mode: '0777'})\n  })\n  noexception('No errors occur when NOT passing in options', function () {\n    writeFileAtomicSync('good', 'test')\n  })\n  throws('ENOWRITE', 'writeFile failures propagate', function () {\n    writeFileAtomicSync('nowrite', 'test')\n  })\n  throws('ENOCHOWN', 'Chown failures propagate', function () {\n    writeFileAtomicSync('nochown', 'test', {chown: {uid: 100, gid: 100}})\n  })\n  noexception('No attempt to chown when no uid/gid passed in', function () {\n    writeFileAtomicSync('nochown', 'test')\n  })\n  throws('ENORENAME', 'Rename errors propagate', function () {\n    writeFileAtomicSync('norename', 'test')\n  })\n  throws('ENORENAME', 'Failure to unlink the temp file does not clobber the original error', function () {\n    writeFileAtomicSync('norename nounlink', 'test')\n  })\n})\n"]}